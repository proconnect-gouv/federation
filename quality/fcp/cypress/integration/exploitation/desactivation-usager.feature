#language: fr
@exploitation @desactivationUsager @ignoreHigh @ignoreLow
Fonctionnalité: Désactivation Usager
  En tant qu'exploitant,
  je veux désactiver un compte usager
  afin que l'usager ne puisse pas utiliser le service France Connect

  @usagerActif
  Scénario: Verrouillage d'un usager
    Etant donné que le compte usager est actif
    Et que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que j'effectue une redressement RNIPP pour l'usager
    Et que le status de l'usager est "actif"
    Quand je désactive le compte de l'usager
    Alors le status de l'usager est "désactivé"
    Et l'usager ne peut pas se connecter à FranceConnect

  @usagerDesactive
  Scénario: Deverrouillage d'un usager
    Etant donné que le compte usager est désactivé
    Et que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que j'effectue une redressement RNIPP pour l'usager
    Et que le status de l'usager est "désactivé"
    Quand j'active le compte de l'usager
    Alors le status de l'usager est "actif"
    Et l'usager peut se connecter à FranceConnect

  Scénario: Connexion d'un usager désactivé
    Etant donné que mon compte usager est désactivé
    Et que je navigue sur la page fournisseur de service
    Et que je clique sur le bouton FranceConnect
    Et que je suis redirigé vers la page sélection du fournisseur d'identité
    Et que je choisis un fournisseur d'identité avec "eidas1"
    Et que je suis redirigé vers la page login du fournisseur d'identité
    Quand je m'authentifie avec succès
    Alors je suis redirigé vers la page erreur technique
    Et le message d'erreur est "Account blocked"
    Et le code d'erreur est "Y180001"
    Et le numméro de session FranceConnect est affichée
