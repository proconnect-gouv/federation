import { Given } from 'cypress-cucumber-preprocessor/steps';

import {
  getIdentityProviderConfig,
  getIdentityProviderFromConfig,
} from '../helpers/idp-config-provider';

Given(
  "j'utilise la configuration pour le fournisseur d'identité {string}",
  function (idpConfigName: string) {
    this.idpConfig = getIdentityProviderConfig(this.idpConfigs, idpConfigName);
  },
);

Given(
  /^j'utilise le dernier fournisseur d'identité (créé|modifié|supprimé)$/,
  function () {
    const platform = Cypress.env('PLATFORM');
    this.identityProvider = getIdentityProviderFromConfig(
      this.idpConfig,
      platform,
    );
  },
);
