#language: fr
@exploitation @creationModificationFI @ci
Fonctionnalité: Création Modification de FI - FCA LOW
  # En tant qu'exploitant,
  # je veux pouvoir créer et modifier des FI
  # afin que la plateforme AgentConnect soit à jour

  Scénario: Création d'un FI sans discovery Url
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs d'identité
    Et que je clique sur le bouton de création de FI
    Et que j'utilise la configuration pour le fournisseur d'identité "default"
    Et que j'entre les valeurs par défaut pour mon fournisseur d'identité
    Et que j'entre "bdd-idp-without-discovery" dans le champ "name" du formulaire de création de FI
    Et que j'entre "gondor.elf" dans le champ "fqdns" du formulaire de création de FI
    Quand je valide le formulaire de création de FI
    Alors le message de confirmation de création de FI est affiché

  Scénario: Modification d'un FI pour rajouter un fqdn
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs d'identité
    Et que j'utilise la configuration pour le fournisseur d'identité "default"
    Et que je clique sur le bouton de modification du FI "bdd-idp-without-discovery"
    Et que j'entre "mordor.orc" dans le champ "fqdns" du formulaire de création de FI
    Et que j'entre "true" dans le champ "active" du formulaire de création de FI
    Et que j'entre "true" dans le champ "display" du formulaire de création de FI
    Quand je valide le formulaire de modification de FI
    Alors le message de confirmation de modification du FI "bdd-idp-without-discovery" est affiché
    Et j'utilise le fournisseur de service "par défaut"
    Et je navigue sur la page fournisseur de service
    Et je clique sur le bouton AgentConnect
    Et j'entre l'email "sauron@mordor.orc"
    Et que je clique sur le bouton de connexion
    Et je suis redirigé vers la page login du fournisseur d'identité
    Et le champ identifiant correspond à "sauron@mordor.orc"

  Scénario: Suppression des FI commençant par "bdd-idp-"
    Etant donné que je navigue sur la page login d'exploitation
    Et je me connecte à exploitation en tant que "exploitant"
    Quand je navigue vers la page gestion des fournisseurs d'identité
    Et je supprime les fournisseurs d'identité commençant par "bdd-idp-"
