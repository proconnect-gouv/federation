<!DOCTYPE html>
<html lang="fr">
<head>
  <% include partials/head.ejs %>
</head>
<body>
<% include partials/header.ejs %>
<div class="container">
  <div class="row">
    <div class="col-12">
      <p class="h2">Ajouter un nouveau fournisseur de service</p>
    </div>
    <div class="card col-12">
      <% if (locals.globalError) { %>
        <div class="alert alert-danger mt-3">
          <%= globalError.code && ERROR_CODE_TRANSLATIONS[globalError.code] ? ERROR_CODE_TRANSLATIONS[globalError.code] : globalError %>
        </div>
      <% } %>
      <div class="card-body">
        <form method="POST" data-init="validForm" novalidate>
          <div class="form-group row">
            <label class="col-2 col-form-label" for="name">Nom : </label>
            <div class="col-10">
              <input id="name" type="'text" required
                     class="form-control <%= locals.errors && errors.name && 'is-invalid' %>" placeholder="Nom du fournisseur de service"
                     name="name" value="<%= locals.values && values.name %>" pattern="^[a-z0-9-]+$"
                     required>
              <% if (locals.errors && errors.name) { %>
                <div class="invalid-feedback">
                  <% errors.name.forEach((error) => { %>
                    <p><%= error %></p>
                  <% }) %>
                </div>
              <% } %>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-2 col-form-label" for="redirectUri">Url de redirection : </label>
            <div class="col-10">
              <textarea id="redirectUri" type="'text" required
                     class="form-control <%= locals.errors && errors.redirectUri && 'is-invalid' %>" placeholder="https://url-de-redirection.com"
                     name="redirectUri" value="<%= locals.values && values.redirectUri %>" 
                     pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$"></textarea>
              <% if (locals.errors && errors.redirectUri) { %>
                <div class="invalid-feedback">
                  <% errors.redirectUri.forEach((error) => { %>
                    <p><%= error %></p>
                  <% }) %>
                </div>
              <% } %>
            </div>
          </div>


          <div class="form-group row">
            <label class="col-2 col-form-label" for="redirectUriLogout">Url de redirection de déconnexion : </label>
            <div class="col-10">
              <textarea id="redirectUriLogout" type="text" required
                     class="form-control <%= locals.errors && errors.redirectUriLogout && 'is-invalid' %>" 
                     value="<%= locals.values && values.redirectUriLogout %>" 
                     name="redirectUriLogout" placeholder="https://url-de-redirection/deconnexion.com"
                     pattern='^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$'></textarea>
              <% if (locals.errors && errors.redirectUriLogout) { %>
                <div class="invalid-feedback">
                  <% errors.redirectUriLogout.forEach((error) => { %>
                    <p><%= error %></p>
                  <% }) %>
                </div>
              <% } %>
            </div>
          </div>

          <div class="form-group row">
              <label class="col-2 col-form-label" for="site">Site : </label>
              <div class="col-10">
                <input id="site" type="'text" required
                       class="form-control <%= locals.errors && errors.site && 'is-invalid' %>" placeholder="https://monsite.com"
                       name="site" value="<%= locals.values && values.site %>" pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$"
                       required>
                <% if (locals.errors && errors.site) { %>
                  <div class="invalid-feedback">
                    <% errors.site.forEach((error) => { %>
                      <p><%= error %></p>
                    <% }) %>
                  </div>
                <% } %>
              </div>
            </div>


            <div class="form-group row">
                <label class="col-2 col-form-label" for="emails">Email(s) de contact (une adresse mail par ligne)</label>
                <div class="col-10">
                <textarea id="emails" class="form-control  <%= locals.errors && errors.emails && 'is-invalid' %>" 
                  name="emails" value="<%= locals.values && values.emails %>" pattern='^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$'></textarea>
                <% if (locals.errors && errors.emails) { %>
                  <div class="invalid-feedback">
                    <% errors.emails.forEach((error) => { %>
                      <p><%= error %></p>
                    <% }) %>
                  </div>
                <% } %>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-2 col-form-label" for="ipAddresses">Plages d'adresses IP</label>
                <div class="col-10">
                <textarea id="ipAddresses" class="form-control  <%= locals.errors && errors.ipAddresses && 'is-invalid' %>" 
                  name="ipAddresses" value="<%= locals.values && values.ipAddresses %>" 
                  pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"></textarea>
                <% if (locals.errors && errors.emails) { %>
                  <div class="invalid-feedback">
                    <% errors.ipAddresses.forEach((error) => { %>
                      <p><%= error %></p>
                    <% }) %>
                  </div>
                <% } %>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-2 col-form-label" for="activateClient">FS activé en production : </label>
                <div class="col-10">
                <input type="radio" name="activateClient" value=true disabled="true"> Oui
                <input type="radio" name="activateClient" value=false  checked disabled="true"> Non
              </div>
            </div>

            <div class="form-group row">
                <label class="col-2 col-form-label" for="clientStatus" >Status du fournisseur de service  : </label>
                <div class="col-10">
                <input type="radio" name="clientStatus" value=private> privé
                <input type="radio" name="clientStatus" value=public> publique
              </div>
            </div>

          <button type="submit" class="btn btn-primary">Créer le fournisseur de service</button>
        </form>
      </div>
    </div>
  </div>
</div>
</body>
</html>
