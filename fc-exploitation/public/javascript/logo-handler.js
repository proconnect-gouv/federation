import $ from 'jquery';

export function logoHandler(element) {
  const logoUpload = $(element).find('div[data-role="logoUpload"] input');

  $(element).find('label[data-role="reset"]').on('click', function () {
    if (!$('[data-role="displayActualLogo"]').attr('src')) {
      $(element).attr('data-status', 'empty');
    } else {
      $(element).find('form[name="fs-delete-form"] button[type="submit"]').removeAttr('disabled');
      $(element).attr('data-status', 'display');
    }

    $(element).find('form[name="fs-logo-form"] button[type="submit"]').attr('disabled', '')

    logoUpload.next().removeClass('selected').html('Taille optimale H380xL200 px');
    logoUpload.val('');
  });

  logoUpload.on('change', function () {
    var reader = new FileReader();
    
    reader.onload = function(e) {
      $(element).find('img[data-role="displayPreviewLogo"]').attr('src', e.target.result);
    }
    
    reader.readAsDataURL(logoUpload[0].files[0]);

    $(element).find('form[name="fs-logo-form"] button[type="submit"]').removeAttr('disabled');
    $(element).find('form[name="fs-delete-form"] button[type="submit"]').attr('disabled', '');
    $(element).attr('data-status', 'preview');
  });
}
