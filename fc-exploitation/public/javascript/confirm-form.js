import $ from 'jquery';
import { confirmDialogWithTotp } from './confirm-dialog';

export function removeItem(element) {
	const elmType = element.getAttribute('data-element-type');
	const elmTitle = element.getAttribute('data-element-title');
	const elmId = element.getAttribute('data-element-id');
	element.addEventListener('submit', function (event) {

    event.preventDefault();
    event.stopPropagation();

    confirmDialogWithTotp(`Voulez-vous supprimer ${elmType} <strong>${elmTitle}</strong> ?`, (confirm, totp) => {
      if (confirm) {
        $(`#delete-${elmId} input[name="_totp"]`).val(totp);
        $(`#delete-${elmId}`).submit();
      }
    });
  }, false);
}
