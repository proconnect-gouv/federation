import { login } from '../login.util';
import { BASE_URL, USER_OPERATOR, USER_PASS } from '../constants.util';

describe('Pagination', () => {
  beforeEach(() => {
    login(USER_OPERATOR, USER_PASS);
  });

  describe('Service provider page', () => {
    describe('Success Case', () => {
      it('should exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/service-provider?page=1&limit=1`);
        cy.get('#pagination-container').should('be.visible');
      });

      it('Should on click change to the page correct page number', () => {
        cy.visit(`${BASE_URL}/service-provider?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.url().should('eq', `${BASE_URL}/service-provider?page=2&limit=1`);
      });

      it('Should show a selected color on the current page', () => {
        cy.visit(`${BASE_URL}/service-provider?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.get('#pagination-container > li').eq('2').should('have.class', 'active');
      });
    });
    describe('Failling Case', () => {
      it('should not exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/service-provider?page=1&limit=100000000000`);
        cy.get('#pagination').should('not.be.visible');
      });
    });
  });

  describe('Identity provider page', () => {
    describe('Success Case', () => {
      it('should exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/identity-provider?page=1&limit=1`);
        cy.get('#pagination-container').should('be.visible');
      });

      it('Should on click change to the page correct page number', () => {
        cy.visit(`${BASE_URL}/identity-provider?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.url().should('eq', `${BASE_URL}/identity-provider?page=2&limit=1`);
      });

      it('Should show a selected color on the current page', () => {
        cy.visit(`${BASE_URL}/identity-provider?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.get('#pagination-container > li').eq('2').should('have.class', 'active');
      });
    });
    describe('Failling Case', () => {
      it('should not exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/identity-provider?page=1&limit=10000000000`);
        cy.get('#pagination-container').should('not.be.visible');
      });
    });
  });

  describe('Account page', () => {
    describe('Success Case', () => {
      it('should exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/account?page=1&limit=1`);
        cy.get('#pagination-container').should('be.visible');
      });

      it('Should on click change to the page correct page number', () => {
        cy.visit(`${BASE_URL}/account?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.url().should('eq', `${BASE_URL}/account?page=2&limit=1`);
      });

      it('Should show a selected color on the current page', () => {
        cy.visit(`${BASE_URL}/account?page=1&limit=1`);
        cy.get('#pagination-container > li').contains('2').click();
        cy.get('#pagination-container > li').eq('2').should('have.class', 'active');
      });
    });
    describe('Failling Case', () => {
      it('should not exist if there is more than the ten items in on the page', () => {
        cy.visit(`${BASE_URL}/account?page=1&limit=10000000000`);
        cy.get('#pagination-container').should('not.be.visible');
      });
    });
  });
});
