import {
  USER_OPERATOR,
  USER_PASS,
} from '../../../../shared/cypress/support/constants';
import { openDataProvidersPage } from './data-provider.utils';

const BASE_URL = Cypress.config('baseUrl');

describe('Data provider listing', () => {
  before(() => {
    cy.resetEnv('mongo');
    cy.login(USER_OPERATOR, USER_PASS);
  });

  describe('List data providers as Operator', () => {
    beforeEach(() => {
      cy.login(USER_OPERATOR, USER_PASS);
    });
    
    it('I can view the list of registered data providers', () => {
      openDataProvidersPage();

      cy.contains('3 fournisseurs provisionnés et actifs').should('be.visible');
      cy.contains('Fournisseur de données Mock - 1').should('be.visible');
      cy.contains('Fournisseur de données Mock - 2').should('be.visible');

      // client ID of the first data provider
      cy.contains('423dcbdc5a15ece61ed00ff5989d72379c26d9ed4c8e4e05a87cffae019586e0').should('be.visible');

      // cy.get('[id^="provider-"]:first').click();

      // cy.url().should(
      //   'match',
      //   new RegExp(`${BASE_URL}\/data-provider\/[0-9a-f]{24}`),
      // );
    });
  });
});
