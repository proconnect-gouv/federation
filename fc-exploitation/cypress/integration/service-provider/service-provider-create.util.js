export function createServiceProvider(serviceProviderInfo, configuration, baseUrl) {

	cy.url().should('eq', `${baseUrl}/service-provider`);
	cy.contains('CrÃ©er un fournisseur de service').click();
	// Fill in form
	cy.get('input[name=name]')
		.clear()
		.type(`${serviceProviderInfo.name}`);
	cy.get('textarea[name=redirectUri]')
		.clear()
		.type(`${serviceProviderInfo.redirectUri}`);
	cy.get('textarea[name=redirectUriLogout]')
		.clear()
		.type(`${serviceProviderInfo.redirectUriLogout}`);
	cy.get('textarea[name=site]')
		.clear()
		.type(`${serviceProviderInfo.site}`);
	cy.get('textarea[name=emails]')
		.clear()
		.type(`${serviceProviderInfo.emails}`);
	cy.get('textarea[name=ipAddresses]')
		.clear()
		.type(`${serviceProviderInfo.idAdresses}`);
	// You cannot directly await the return of "fixtures" (not a real promise...)
	if (configuration.useLogo === true) {
		cy.fixture(`logos/${serviceProviderInfo.fileName}`).then(logo => {
			cy.get('input[type=file]').upload({
				fileContent: logo,
				fileName: `${serviceProviderInfo.fileName}`,
				mimeType: `${serviceProviderInfo.mimeType}`,
				encoding: `${serviceProviderInfo.encoding}`,
			});
		});
	}

	cy.get('[type="radio"]')
		.check('public', { force: true });
	cy.get('form[name="fs-form"] button[type="submit"]')
		.click();
}