import { USER_OPERATOR, USER_PASS } from '../../../../shared/cypress/support/constants';

const BASE_URL = Cypress.config('baseUrl');

describe('Access information messages', () => {
  before(() => cy.resetEnv('mongoFC'));
  beforeEach(() => {
    cy.login(USER_OPERATOR, USER_PASS);
  });

  describe('Show messages', () => {
    it('should be possible to access information messages management page', () => {
        cy.get('#dropdownMenuButton').click();
        cy.get('.dropdown-menu #informations').click();
        let createdAt = Date.now();
        let temp = Date.now();
        cy.get('#messages > tr').then((rows) => {
            rows.map((index, elem) => {
                temp = Cypress.moment(elem.cells[3].textContent.trim(), 'DD/MM/YYYY hh:mm:ss').format('x')
                expect(createdAt).to.be.greaterThan(temp);
                createdAt = temp;
            })
        })
    })
  });

  describe('Paginate', () => {
    it('should be possible to access the second page of messages', () => {
      cy.get('#dropdownMenuButton').click();
      cy.get('.dropdown-menu #informations').click();
      cy.get('#pagination-container').contains('2').click();
    })
  });
});
