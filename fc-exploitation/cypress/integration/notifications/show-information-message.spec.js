import { USER_OPERATOR, USER_PASS } from '../../../../shared/cypress/support/constants';

describe('Access information messages', () => {
  before(() => cy.resetEnv('mongoFC'));
  beforeEach(() => {
    cy.login(USER_OPERATOR, USER_PASS);
  });

  describe('Show messages', () => {
    it('should be possible to access information messages management page', () => {
        cy.get('#dropdownMenuButton').click();
        cy.get('.dropdown-menu #informations').click();
        let lastCreatedAt = Date.now();
        let currentCreatedAt;
        cy.get('#messages > tr').then((rows) => {
            rows.map((_index, elem) => {
              currentCreatedAt = Cypress.moment(elem.cells[3].textContent.trim(), 'DD/MM/YYYY HH:mm:ss').format('x')
                expect(currentCreatedAt).to.be.below(lastCreatedAt);
                lastCreatedAt = currentCreatedAt;
            })
        })
    })
  });

  describe('Paginate', () => {
    it('should be possible to access the second page of messages', () => {
      cy.get('#dropdownMenuButton').click();
      cy.get('.dropdown-menu #informations').click();
      cy.get('#pagination-container').contains('2').click();
    })
  });
});
