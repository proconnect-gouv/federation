const BASE_URL = Cypress.config('baseUrl');

export function createIdentityProvider(identityProviderInfo, configuration) {
  cy.url().should('eq', `${BASE_URL}/identity-provider`);
  cy.contains("Créer un fournisseur d'identité").click();

  cy.formFill(identityProviderInfo, configuration);

  cy.get('form[name="fi-form"] button[type="submit"]').click();
}

export function updateIdentityProvider(
  name,
  identityProviderUpdateInfo,
  configuration,
) {
  cy.url().should(
    'eq',
    `${BASE_URL}/identity-provider?page=1&limit=9001`,
  );

  cy.contains(name).should('be.visible');
  cy.contains(name)
    .closest('tr')
    .find('.btn-action-update')
    .click();

  cy.contains(`Modifier le fournisseur d'identité:`).should('be.visible');
  cy.get('input[name=name]').should('have.value', name);

  cy.formFill(identityProviderUpdateInfo, configuration);

  cy.get('form[name="fi-form"] button[type="submit"]').click();
}

export function assertFormValues(identityProviderInfo) {
  cy.formControl(identityProviderInfo);
}
