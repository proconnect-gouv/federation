import {Â getTotp } from '../util/totp.util';
import { SECRET_TOTP } from '../util/constants.util';


export function validFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });

}

export function invalidTotpFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').clear().type('invalidTotp');
  cy.get('button[type="submit"]').click();
}

export async function invalidFormMessageFilledForm() {
  cy.get('textarea[name="message"]').clear();
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });
  cy.get('button[type="submit"]').click();
}

export async function invalidFormDateDebutFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-13');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });
}

export async function invalidFormDateFinFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-11');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });
}

export async function invalidFormHeureDebutFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('12:00');
  cy.get('input[name="heureFin"]').clear().type('11:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });
}

export async function invalidFormHeureFinFilledForm() {
  cy.get('textarea[name="message"]').clear().type('Nouveau message');
  cy.get('input[name="dateDebut"]').clear().type('2019-09-12');
  cy.get('input[name="dateFin"]').clear().type('2019-09-12');
  cy.get('input[name="heureDebut"]').clear().type('10:00');
  cy.get('input[name="heureFin"]').clear().type('09:00');
  cy.get('input[name="emails"]').clear().type('seldon@fondation.com');
  cy.get('input[name="activateMessage"]').uncheck().check({ force: true });
  cy.get('input[name="_totp"]').then(async totp => {
    const token = await getTotp(SECRET_TOTP);
    cy.get('input[name="_totp"]').type(token);
  });
}

export function emptyForm() {
  cy.get('button[type="submit"]').click();
}

export function useMenuToIndisponibilitePage() {
  cy.get('#dropdownMenuButton').click();
  cy.get('#indisponibilite').click();
}
