import {Controller, Get, Req} from '@nestjs/common';
import {IdentityProvider} from "./identity-provider/identity-provider.entity";
import {Repository} from 'typeorm';
import {InjectRepository} from '@nestjs/typeorm';

@Controller()
export class AppController {
  constructor(@InjectRepository(IdentityProvider, 'fc-mongo') private readonly identityProviderRepository: Repository<IdentityProvider>) {}

  @Get()
  async getHello(@Req() req): Promise<string> {
    const identityProviders = await this.identityProviderRepository.find();
    return JSON.stringify(identityProviders);
  }
}
