import axios from 'axios';

import { ThunkActionType, ThunkDispatchType } from '../../../interfaces';
import { loadingCompleted, loadingStarted } from '../../loading/actions';
import EVENTS from '../events';

const loadHelloWorld: ThunkActionType =
  () =>
  async (dispatch: ThunkDispatchType): Promise<any> => {
    dispatch(loadingStarted());
    const url = 'https://exploit-fcp.docker.dev-franceconnect.fr/api';
    const { data } = await axios.get(url);
    dispatch({
      payload: data,
      type: EVENTS.HELLOWORLD_UPDATED,
    });
    dispatch(loadingCompleted());
  };

export default loadHelloWorld;
