<!doctype html>
<html lang="fr" data-fr-scheme="light">
  <head>
    <%- include('includes/head.ejs') %>
    <link rel="stylesheet" href="/css/pages/error.css" />
    <link rel="stylesheet" href="/css/pages/interaction.css" />
    <link rel="stylesheet" href="/css/pages/dsfr.pc.css" />
    <title>
      <%  if (locals.exceptionDisplay.title)  { %>
        <%= locals.exceptionDisplay.title %> - ProConnect
      <% } else { %>
        Accès impossible - ProConnect
      <% } %>
    </title>
  </head>
  <body>
    <%- include('includes/skiplinks.ejs') %>
    <%- include('includes/header.ejs') %>
    <main
      class="fr-container fr-grid-row fr-grid-row--center"
      role="main"
      id="content"
    >
      <section data-testid="error-section" class="fr-col-lg-10 fr-col-md-10">
        <section class="fr-grid-row fr-grid-row--center fr-my-5w">
          <div class="fr-col-lg-8 fr-col-md-7 fr-col-sm-12">
            <div>
              <h1 data-testid="error-section-title" class="fr-mb-3w">
                <%  if (locals.exceptionDisplay.title)  { %>
                  <%= locals.exceptionDisplay.title %>
                <% } else { %>
                  Accès impossible
                <% } %>
              </h1>

              <% if (locals.exceptionDisplay.description)  { %>
                <p class="error-description-with-white-space"><%- locals.exceptionDisplay.description %></p>
              <% } else { %>
                <p>Nous n'arrivons pas à vous connecter à votre service en ligne pour l'instant.</p>
              <% } %>

              <% if(locals.exceptionDisplay.crispLink) { %>
                <p>
                  Pour en savoir plus sur cette erreur, consultez
                  <a
                    class="fr-link"
                    rel="noopener external"
                    target="_blank"
                    href="<%= locals.exceptionDisplay.crispLink %>"
                  >la page d'aide correspondante<span class="visually-hidden"> - nouvelle fenêtre</span></a>.
                </p>
            <% } %>

              <% if (locals.error.code) { %>
                <p class="fr-text--xs fr-mt-0 fr-mb-1v" data-testid="error-code">
                  code erreur : <%= locals.error.code %>
                </p>
              <% } %>

              <% if (locals.error.id) { %>
                <p class="fr-text--xs fr-mt-0 fr-mb-1v" data-testid="error-id">
                  id erreur : <%= locals.error.id %>
                </p>
              <% } %>

              <% if (locals.error.message) { %>
                <p class="fr-text--xs fr-mt-0 fr-mb-1v" data-testid="error-message">
                  message erreur : "<%= locals.error.message %>".
                </p>
              <% } %>
            </div>

            <% if (locals.exceptionDisplay.displayContact || locals.interactionErrorUrl) { %>
              <section>
                <div class="fr-mt-4w">
                  <% if (locals.exceptionDisplay.displayContact) { %>
                    <hr>
                    <p class="fr-text--sm fr-mb-1w">
                      <%  if (locals.exceptionDisplay.contactMessage)  { %>
                        <%= locals.exceptionDisplay.contactMessage %>
                      <% } else { %>
                        Vous pouvez nous signaler cette erreur en nous écrivant.
                      <% } %>
                    </p>
                  <% } %>
                  <div>
                    <% if (locals.exceptionDisplay.displayContact) { %>
                      <a class="fr-btn <%= locals.exceptionDisplay.mainAction !== 'goBack' && 'fr-btn--tertiary' %> fr-icon-flag-line fr-btn--icon-right fr-mr-1w" href="<%= locals.exceptionDisplay.contactHref %>">
                        Signaler l'erreur
                      </a>
                    <% } %>
                    <% if (locals.interactionErrorUrl) { %>
                      <a class="fr-btn <%= locals.exceptionDisplay.mainAction !== 'goBack' && 'fr-btn--tertiary' %> fr-mt-1w fr-mt-md-0" href="<%= locals.interactionErrorUrl %>">
                        Retour au service
                      </a>
                    <% } %>
                  </div>
                </div>
              </section>
            <% } %>

          </div>

          <aside class="fr-col-lg-4 fr-col-md-5 error-aside">
            <img src="/img/<%= locals.exceptionDisplay.illustration || 'default-error' %>.svg" alt="" />
          </aside>
        </section>
      </section>
    </main>
    <%- include('includes/footer.ejs') %> <%- include('includes/scripts.ejs') %>
  </body>
</html>
