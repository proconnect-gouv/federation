<!doctype html>
<html lang="fr" data-fr-scheme="light">
  <head>
    <%- include('includes/head.ejs') %>
    <link rel="stylesheet" href="/css/pages/interaction.css" />
    <link rel="stylesheet" href="/css/pages/dsfr.pc.css" />
    <title>Choix du compte - ProConnect</title>
  </head>
  <body>
    <%- include('includes/skiplinks.ejs') %>
    <%- include('includes/notice.ejs') %>
    <%- include('includes/header.ejs') %>
    <div id="email-container" data-login-hint="<%= locals.loginHint %>"></div>
    <main role="main" id="content" class="fr-py-2w">
      <div class="fr-container">
        <div class="fr-grid-row fr-grid-row--center">
          <div class="fr-col-12 fr-col-md-8 fr-col-lg-5">
            <h1 class="fr-mb-1v fr-h2">Se connecter ou s'inscrire à</h1>
            <h2 class="fr-text--lead"><%= locals.spName %></h2>
            <% if (locals.notificationMessage) { %>
              <div
                class="fr-notice fr-notice--info background-alt-blue-france ac-color-alt-grey fr-my-8v"
              >
                <div class="fr-container">
                  <div class="fr-notice__body">
                    <p style="white-space: pre-wrap" class="fr-notice__title"><%- locals.notificationMessage %></p>
                  </div>
                </div>
              </div>
            <% } %>
            <form action="/api/v2/redirect-to-idp" method="POST" name="email-check">
              <div class="<% if (locals.isEmailInvalid) { %> fr-input-group fr-input-group--error<% } %>">
                <label class="fr-label fr-mt-1v" for="email-input">
                  Email professionnel
                  <span class="fr-hint-text">Format attendu : nom@domaine.fr</span>
                </label>
                <input class="fr-input fr-bx-1v" type="email" id="email-input" spellcheck="off" autocomplete="email" name="email" required />
                <% if (locals.isEmailInvalid) { %>
                  <p class="fr-error-text">Adresse e-mail invalide.</p>
                <% } %>
                <% if (locals.emailSuggestion) { %>
                      <p id="email-suggestion-element" class="fr-info-text">
                          <span>
                          Vouliez-vous dire
                          <a id="email-suggestion-link" href="#" title="<%= locals.emailSuggestion %> (cliquer pour remplir le champ)"><%= locals.emailSuggestion %></a> ?
                          </span>
                      </p>
                      <script type="module" src="/js/email-suggestion.js" ></script>
                  <% } %>
                </div>
                <div class="fr-fieldset__element fr-mt-2w">
                  <div class="fr-checkbox-group fr-checkbox-group--sm">
                      <input name="rememberMe" id="remember-me" type="checkbox" aria-describedby="remember-me-messages">
                      <label class="fr-label" for="remember-me">
                          Se souvenir de moi
                      </label>
                      <div class="fr-messages-group" id="remember-me-messages" aria-live="assertive">
                      </div>
                  </div>
                </div>
                <div class="fr-btns-group">
                  <button id="email-submit-button" onclick="" type="submit" class="fr-mb-0 fr-btn" data-testid="interaction-connection-button">
                    Continuer
                  </button>
                </div>  
    
              <input type="hidden" name="csrfToken" value="<%= locals.csrfToken %>" />
            </form>
            <% if (locals.defaultEmailRenater) { %>
            <p class="fr-hr-or fr-mt-4w pc-hr-or">Continuer avec</p>
            <ul class="fr-btns-group">
              <li>
                <form
                          name="renaterRedirection"
                          method="POST"
                          action="/api/v2/redirect-to-idp"
                  >
                    <input
                            type="hidden"
                            name="email"
                            value="<%= locals.defaultEmailRenater %>"
                    />
                    <input type="hidden" name="csrfToken" value="<%= locals.csrfToken %>" />
                    <button class="fr-btn fr-btn--secondary">
                      <img src="/img/renater.svg" alt="" aria-hidden="true" class="fr-mr-1w icon-btn-size">
                      Fédération Renater
                    </button>
                  </form>
              </li>
            </ul>
            <% } %>
          </div>
        </div>
      </div>
    </main>
    <%- include('includes/footer.ejs') %> <%- include('includes/scripts.ejs') %>
    <script type="text/javascript" src="/js/email-fca.js" defer></script>
  </body>
</html>
